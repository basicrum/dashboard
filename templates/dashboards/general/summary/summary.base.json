{
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 4,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 0
        },
        "id": 4,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    toDate(event_date) as t,\n    countIf(device_type = 'mobile') as Mobile,\n    countIf(device_type = 'desktop') as Desktop\nFROM $table\n\nWHERE\n    $timeFilter\n\n    AND event_type = 'visit_page'\n    AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n\nGROUP BY t\nORDER BY t\n",
            "rawQuery": "SELECT\n    toDate(event_date) as t,\n    countIf(device_type = 'mobile') as Mobile,\n    countIf(device_type = 'desktop') as Desktop\nFROM default.webperf_rum_events\n\nWHERE\n    event_date >= toDate(1666184329) AND event_date <= toDate(1668779929) AND created_at >= toDateTime(1666184329) AND created_at <= toDateTime(1668779929)\n\n    AND event_type = 'visit_page'\n     AND hostname in('skyrecord.eu') \n\nGROUP BY t\nORDER BY t",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Visits per day",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 0
        },
        "id": 21,
        "options": {
          "layout": {
            "barmode": "stack",
            "legend": {
              "bgcolor": "#fff",
              "orientation": "h"
            },
            "margin": {
              "b": 30,
              "l": 45,
              "pad": 4,
              "r": 10,
              "t": 10
            },
            "paper_bgcolor": "rgba(0, 0, 0, 0)",
            "plot_bgcolor": "rgba(0, 0, 0, 0)",
            "xaxis": {
              "autorange": false,
              "range": [
                -1,
                2600
              ],
              "tickmode": "array",
              "ticktext": [
                "250 px",
                "500 px",
                "1000 px",
                "1500 px",
                "2000 px",
                "3000 px",
                "4000 px",
                "5000 px"
              ],
              "tickvals": [
                250,
                500,
                1000,
                1500,
                2000,
                3000,
                4000,
                5000
              ]
            }
          },
          "onclick": "console.log(data)\nwindow.updateVariables({query:{'var-project':'test'}, partial: true})",
          "script": "console.log(data)\n\nvar xValue = data.series[0].fields[0].values.buffer;\n\nvar yValue = data.series[0].fields[1].values.buffer;\n\nvar trace1 = {\n  x: xValue,\n  y: yValue,\n  type: 'bar',\n  textposition: 'auto',\n  hoverinfo: 'none',\n  marker: {\n    opacity: 0.6,\n    line: {\n      color: 'rgb(8,48,107)',\n      width: 1.5\n    }\n  }\n};\n\n\nreturn {data:[trace1],layout:{title:''}};"
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "table",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    intDiv(screen_width, 100) * 100 as screen_width,\n    sum(toUInt64(1)) as count\n    \nFROM $table\n\nWHERE\n    $timeFilter\n    AND event_type = 'visit_page'\n    AND screen_width <= 2500\n    AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n\nGROUP BY screen_width\nORDER BY screen_width\n\n",
            "rawQuery": "SELECT\n    intDiv(screen_width, 150) * 150 as screen_width,\n    sum(toUInt64(1)) as count\n    \nFROM default.webperf_rum_events\n\nWHERE\n    event_date >= toDate(1660563602) AND event_date <= toDate(1668343202) AND created_at >= toDateTime(1660563602) AND created_at <= toDateTime(1668343202)\n    AND event_type = 'visit_page'\n    AND screen_width <= 2500\n     AND hostname in('iventishirts1.com') \n\nGROUP BY screen_width\nORDER BY screen_width",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Screen Widths",
        "transformations": [],
        "transparent": true,
        "type": "ae3e-plotly-panel"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineWidth": 1,
              "scaleDistribution": {
                "type": "linear"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "desktop"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "blue",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Desktop"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "mobile"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "green",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Mobile"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "tablet"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "orange",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Tablet"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "bot"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "dark-red",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Bot"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 8
        },
        "id": 33,
        "options": {
          "barRadius": 0,
          "barWidth": 0.97,
          "groupWidth": 0.7,
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "orientation": "auto",
          "showValue": "never",
          "stacking": "percent",
          "tooltip": {
            "mode": "single",
            "sort": "none"
          },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": -200
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "table",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    toDate(event_date) as t,\n    countIf(device_type = 'desktop') as desktop,\n    countIf(device_type = 'tablet') as tablet,\n    countIf(device_type = 'mobile') as mobile,\n    countIf(device_type = 'bot') as bot\n\nFROM $table\n\nWHERE t BETWEEN toDateTime($from) AND toDateTime($to)\n    AND event_type = 'visit_page'\n    AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\nGROUP BY t",
            "rawQuery": "SELECT\n    toDate(event_date) as t,\n    countIf(device_type = 'desktop') as desktop,\n    countIf(device_type = 'tablet') as tablet,\n    countIf(device_type = 'mobile') as mobile,\n    countIf(device_type = 'bot') as bot\n\nFROM default.webperf_rum_events\n\nWHERE t BETWEEN toDateTime(1666184253) AND toDateTime(1668779853)\n    AND event_type = 'visit_page'\n     AND hostname in('skyrecord.eu') \nGROUP BY t",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Device distribution",
        "transformations": [],
        "type": "barchart"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 8
        },
        "id": 35,
        "options": {
          "content": "# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",
          "mode": "markdown"
        },
        "pluginVersion": "9.1.2",
        "title": "OS Distribution PLACEHOLDER",
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 16
        },
        "id": 24,
        "panels": [],
        "title": "Business metrics",
        "type": "row"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "series",
              "axisLabel": "",
              "axisPlacement": "auto",
              "axisSoftMax": 100,
              "axisSoftMin": 0,
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "bounce_rate"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Bounce Rate"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-orange",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 17
        },
        "id": 40,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM $table\n      WHERE \n        $timeFilter\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type IN ('mobile','desktop','tablet')\n        AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)\n",
            "rawQuery": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM default.webperf_rum_events\n      WHERE \n        event_date >= toDate(1666184714) AND event_date <= toDate(1668780314) AND created_at >= toDateTime(1666184714) AND created_at <= toDateTime(1668780314)\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type IN ('mobile','desktop','tablet')\n         AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Bounce rate - All",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "series",
              "axisLabel": "",
              "axisPlacement": "auto",
              "axisSoftMax": 100,
              "axisSoftMin": 0,
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "bounce_rate"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Bounce Rate"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-green",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 17
        },
        "id": 37,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM $table\n      WHERE \n        $timeFilter\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'mobile'\n        AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)\n",
            "rawQuery": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM default.webperf_rum_events\n      WHERE \n        event_date >= toDate(1666184817) AND event_date <= toDate(1668780417) AND created_at >= toDateTime(1666184817) AND created_at <= toDateTime(1668780417)\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'mobile'\n         AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Bounce rate - Mobile",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "series",
              "axisLabel": "",
              "axisPlacement": "auto",
              "axisSoftMax": 100,
              "axisSoftMin": 0,
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "bounce_rate"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Bounce Rate"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-blue",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 25
        },
        "id": 39,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM $table\n      WHERE \n        $timeFilter\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'desktop'\n        AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)\n",
            "rawQuery": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM default.webperf_rum_events\n      WHERE \n        event_date >= toDate(1666184865) AND event_date <= toDate(1668780465) AND created_at >= toDateTime(1666184865) AND created_at <= toDateTime(1668780465)\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'desktop'\n         AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Bounce rate - Desktop",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "series",
              "axisLabel": "",
              "axisPlacement": "auto",
              "axisSoftMax": 100,
              "axisSoftMin": 0,
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "opacity",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineStyle": {
                "fill": "solid"
              },
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "bounce_rate"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Bounce Rate"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-purple",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 25
        },
        "id": 46,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM $table\n      WHERE \n        $timeFilter\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'tablet'\n        AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)\n",
            "rawQuery": "SELECT \n    event_date,\n    bounce_rate\nFROM (\n  SELECT\n      event_date,\n      count() AS all_sessions,\n      countIf(max_length = 1) AS bounced_sessions,\n      ((bounced_sessions / all_sessions) * 100) as bounce_rate\n  FROM\n  (\n      SELECT\n          event_date,\n          session_id,\n          max(session_length) AS max_length\n      FROM default.webperf_rum_events\n      WHERE \n        event_date >= toDate(1666185015) AND event_date <= toDate(1668780615) AND created_at >= toDateTime(1666185015) AND created_at <= toDateTime(1668780615)\n        AND event_type = 'visit_page'\n        AND visibility_state = 'visible'\n        AND device_type = 'tablet'\n         AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \n      GROUP BY event_date, session_id\n  )\n  GROUP BY event_date\n)",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Bounce rate - Tablet",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "sessions_per_day_all"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-orange",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Sessions count"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 33
        },
        "id": 38,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_all\nFROM $table\nWHERE \n  $timeFilter\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type IN ('mobile', 'desktop', 'tablet')\n  AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\nGROUP BY event_date\nORDER BY event_date\n\n",
            "rawQuery": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_all\nFROM default.webperf_rum_events\nWHERE \n  event_date >= toDate(1666184664) AND event_date <= toDate(1668780264) AND created_at >= toDateTime(1666184664) AND created_at <= toDateTime(1668780264)\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type IN ('mobile', 'desktop', 'tablet')\n   AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \nGROUP BY event_date\nORDER BY event_date",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Sessions per day - All device types",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "sessions_per_day_mobile"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-green",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Sessions count"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 33
        },
        "id": 43,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_mobile\nFROM $table\nWHERE \n  $timeFilter\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'mobile'\n  AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\nGROUP BY event_date\nORDER BY event_date\n\n\n",
            "rawQuery": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_mobile\nFROM default.webperf_rum_events\nWHERE \n  event_date >= toDate(1666184791) AND event_date <= toDate(1668780391) AND created_at >= toDateTime(1666184791) AND created_at <= toDateTime(1668780391)\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'mobile'\n   AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \nGROUP BY event_date\nORDER BY event_date",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Sessions per day - Mobile",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "sessions_per_day_desktop"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-blue",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Sessions count"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 41
        },
        "id": 44,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_desktop\nFROM $table\nWHERE \n  $timeFilter\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'desktop'\n  AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\nGROUP BY event_date\nORDER BY event_date\n\n\n",
            "rawQuery": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_desktop\nFROM default.webperf_rum_events\nWHERE \n  event_date >= toDate(1666184598) AND event_date <= toDate(1668780198) AND created_at >= toDateTime(1666184598) AND created_at <= toDateTime(1668780198)\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'desktop'\n   AND hostname in('skyrecord.eu') \nGROUP BY event_date\nORDER BY event_date",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Sessions per day - Desktop",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "vertamedia-clickhouse-datasource",
          "uid": "cOyJpmM4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 6,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "sessions_per_day_tablet"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "semi-dark-purple",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName",
                  "value": "Sessions count"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 41
        },
        "id": 45,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "9.1.2",
        "targets": [
          {
            "database": "default",
            "datasource": {
              "type": "vertamedia-clickhouse-datasource",
              "uid": "XCeftfenk"
            },
            "dateColDataType": "event_date",
            "dateLoading": false,
            "dateTimeColDataType": "created_at",
            "dateTimeType": "DATETIME",
            "datetimeLoading": false,
            "extrapolate": true,
            "format": "time_series",
            "formattedQuery": "SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t",
            "intervalFactor": 1,
            "query": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_tablet\nFROM $table\nWHERE \n  $timeFilter\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'tablet'\n  AND hostname in (SELECT hostname from webperf_rum_view_hostnames where username = '${__user.login}' $conditionalTest(AND hostname in($hostname), $hostname))\nGROUP BY event_date\nORDER BY event_date\n\n\n",
            "rawQuery": "SELECT\n    event_date,\n    uniq(session_id) as sessions_per_day_tablet\nFROM default.webperf_rum_events\nWHERE \n  event_date >= toDate(1666184628) AND event_date <= toDate(1668780228) AND created_at >= toDateTime(1666184628) AND created_at <= toDateTime(1668780228)\n  AND event_type = 'visit_page'\n  AND visibility_state = 'visible'\n  AND device_type = 'tablet'\n   AND hostname in('iventishirts1.com','fabrikazahranaitanci.com','soccerking-store.com','skyrecord.eu','medilinkbg.com','sotis.bg') \nGROUP BY event_date\nORDER BY event_date",
            "refId": "A",
            "round": "0s",
            "skip_comments": true,
            "table": "webperf_rum_events",
            "tableLoading": false
          }
        ],
        "title": "Sessions per day - Tablet",
        "transformations": [],
        "transparent": true,
        "type": "timeseries"
      }
    ],
    "refresh": false,
    "schemaVersion": 37,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "iventishirts1.com",
            "value": "'iventishirts1.com'"
          },
          "datasource": {
            "type": "vertamedia-clickhouse-datasource",
            "uid": "cOyJpmM4k"
          },
          "definition": "SELECT hostname AS __text, concat('\\'', hostname, '\\'')  AS __value FROM webperf_rum_events where  hostname NOT LIKE  '%.goog' AND hostname != ''  group by hostname",
          "hide": 0,
          "includeAll": false,
          "label": "Host",
          "multi": false,
          "name": "hostname",
          "options": [],
          "query": "SELECT hostname AS __text, concat('\\'', hostname, '\\'')  AS __value FROM webperf_rum_events where  hostname NOT LIKE  '%.goog' AND hostname != ''  group by hostname",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-30d",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Summary",
    "uid": "3zOxdXDVz",
    "version": 16,
    "weekStart": ""
  }